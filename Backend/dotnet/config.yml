# .NET Agent Framework Configuration

# Application settings
app:
  title: ".NET Agent Framework AI Agent System"
  version: "2.0.0"
  frontend_url: "${FRONTEND_URL:*}"
  log_level: "${LOG_LEVEL:Information}"
  environment: "${ENVIRONMENT:Production}"

# Azure OpenAI configuration
azure_openai:
  endpoint: "${AZURE_OPENAI_ENDPOINT}"
  deployment: "${AZURE_OPENAI_DEPLOYMENT_NAME}"
  api_key: "${AZURE_OPENAI_API_KEY}"
  api_version: "${AZURE_OPENAI_API_VERSION:2024-02-01}"

# Microsoft Foundry configuration
ms_foundry:
  project_endpoint: "${MS_FOUNDRY_PROJECT_ENDPOINT}"
  agent_id: "${MS_FOUNDRY_AGENT_ID}"

# MCP (Model Context Protocol) configuration
mcp:
  enabled: true
  defaultTimeoutSeconds: 30
  servers:
    # ???????????????????????????????????????????????????????????????????????????
    # LOCAL TOOLS vs MCP TOOLS COMPARISON
    # ???????????????????????????????????????????????????????????????????????????
    # 
    # This config demonstrates THREE ways to access the same functionality:
    #
    # 1. LOCAL TOOL (WeatherTool.cs)
    #    - Native C# code running in-process
    #    - Fastest execution, no network overhead
    #    - Located in: Agents/Tools/WeatherTool.cs
    #
    # 2. LOCAL MCP (stdio) - demo-api-server below
    #    - MCP server spawned as subprocess
    #    - Communicates via stdin/stdout
    #    - Good for local development
    #
    # 3. REMOTE MCP (SSE) - sample-mcp-bridge below
    #    - MCP server running as separate HTTP service
    #    - Communicates via Server-Sent Events
    #    - Simulates cloud-hosted MCP server
    #
    # All three can call the same REST API endpoints!
    # ???????????????????????????????????????????????????????????????????????????

    # ???????????????????????????????????????????????????????????????????????????
    # LOCAL MCP SERVER (stdio transport) - Built-in Demo API Server
    # ???????????????????????????????????????????????????????????????????????????
    # This spawns the McpServer project as a subprocess
    # Tools: get_weather, get_products, get_order, create_order, etc.
    - name: "local-mcp-server"
      description: "Local MCP Server (STDIO) - Demo API tools via subprocess"
      transport: "stdio"
      command: "dotnet"
      arguments:
        - "run"
        - "--project"
        - "McpServer/DotNetAgentFramework.McpServer.csproj"
      enabled: true
      timeoutSeconds: 30
      environmentVariables:
        DEMO_API_BASE_URL: "http://localhost:8000"
        DEMO_API_AUTH_TOKEN: "Bearer demo-token-12345"

    # ???????????????????????????????????????????????????????????????????????????
    # REMOTE MCP SERVER (SSE transport) - SampleMcpBridge
    # ???????????????????????????????????????????????????????????????????????????
    # This connects to the SampleMcpBridge running as a web server
    # Same tools as local MCP but accessed via HTTP/SSE
    # 
    # To start the remote MCP server:
    #   cd Examples/SampleMcpBridge
    #   dotnet run
    #   # Server runs on http://localhost:5050, SSE endpoint at /sse
    #
    # Tools available: get_weather, get_weather_locations, get_all_products,
    #                  get_product, create_order, get_order, etc.
    - name: "remote-mcp-bridge"
      description: "Remote MCP Bridge (SSE) - Weather and Demo tools via HTTP"
      transport: "sse"
      endpoint: "http://localhost:5050/sse"
      enabled: true
      timeoutSeconds: 30
      # Optional: Add auth header if your MCP server requires it
      # authorization: "Bearer ${MCP_BRIDGE_TOKEN}"
      headers:
        X-Client-Id: "dotnet-agent-framework"

    # ???????????????????????????????????????????????????????????????????????????
    # CLOUD-HOSTED MCP SERVER (SSE transport) - Production Example
    # ???????????????????????????????????????????????????????????????????????????
    # Example configuration for a cloud-deployed MCP server
    # Change the endpoint to your actual cloud URL
    - name: "cloud-mcp-server"
      description: "Cloud-hosted MCP Server (SSE) - Production deployment"
      transport: "sse"
      endpoint: "${CLOUD_MCP_ENDPOINT:http://localhost:5050/sse}"
      enabled: false  # Set to true when you have a cloud deployment
      timeoutSeconds: 60
      authorization: "Bearer ${CLOUD_MCP_API_KEY}"
      headers:
        X-Client-Id: "dotnet-agent-framework"
        X-Environment: "production"

    # ???????????????????????????????????????????????????????????????????????????
    # SAMPLE REST API MCP BRIDGE - Points to SampleRestApi project
    # ???????????????????????????????????????????????????????????????????????????
    # This connects to SampleMcpBridge configured to call SampleRestApi
    # 
    # To use this:
    # 1. Start SampleRestApi:
    #    cd Examples/SampleRestApi
    #    dotnet run  # Runs on http://localhost:60095
    #
    # 2. Start SampleMcpBridge (configure to point to SampleRestApi):
    #    cd Examples/SampleMcpBridge
    #    set REST_API_BASE_URL=http://localhost:60095
    #    dotnet run  # Runs on http://localhost:5050
    #
    # Tools: check_api_health, get_weather, get_weather_locations,
    #        get_all_employees, get_employee, search_employees,
    #        get_all_products, get_product, get_products_by_category,
    #        get_all_orders, get_order, create_order, get_customer_orders,
    #        get_inventory, update_stock
    - name: "sample-rest-api-mcp"
      description: "SampleRestApi via MCP Bridge (SSE) - Full REST API tools"
      transport: "sse"
      endpoint: "${SAMPLE_MCP_ENDPOINT:http://localhost:5050/sse}"
      enabled: false  # Enable when running SampleRestApi + SampleMcpBridge
      timeoutSeconds: 30

    # ???????????????????????????????????????????????????????????????????????????
    # EXTERNAL MCP SERVERS (Third-party MCP servers)
    # ???????????????????????????????????????????????????????????????????????????
    
    # Example: GitHub MCP Server (npx-based)
    - name: "github-mcp"
      description: "GitHub MCP Server for repository operations"
      transport: "stdio"
      command: "npx"
      arguments:
        - "-y"
        - "@modelcontextprotocol/server-github"
      enabled: false
      timeoutSeconds: 60
      environmentVariables:
        GITHUB_PERSONAL_ACCESS_TOKEN: "${GITHUB_TOKEN}"
      allowedTools:
        - "search_repositories"
        - "get_file_contents"
        - "create_issue"
        - "list_issues"
    
    # Example: Filesystem MCP Server
    - name: "filesystem-mcp"
      description: "Local filesystem access via MCP"
      transport: "stdio"
      command: "npx"
      arguments:
        - "-y"
        - "@modelcontextprotocol/server-filesystem"
        - "/allowed/path/here"
      enabled: false
      timeoutSeconds: 30
    
    # Example: Slack MCP Server
    - name: "slack-mcp"
      description: "Slack integration via MCP"
      transport: "stdio"
      command: "npx"
      arguments:
        - "-y"
        - "@modelcontextprotocol/server-slack"
      enabled: false
      environmentVariables:
        SLACK_BOT_TOKEN: "${SLACK_BOT_TOKEN}"
        SLACK_TEAM_ID: "${SLACK_TEAM_ID}"
      allowedTools:
        - "list_channels"
        - "post_message"
        - "search_messages"
    
    # Example: PostgreSQL Database MCP Server
    - name: "postgres-mcp"
      description: "PostgreSQL database access via MCP"
      transport: "stdio"
      command: "npx"
      arguments:
        - "-y"
        - "@modelcontextprotocol/server-postgres"
      enabled: false
      environmentVariables:
        POSTGRES_CONNECTION_STRING: "${POSTGRES_CONNECTION_STRING}"
      allowedTools:
        - "query"
        - "list_tables"
        - "describe_table"

# Agent configurations
agents:
  azure_openai_agent:
    enabled: true
    instructions: |
      You are a helpful, knowledgeable, and versatile assistant powered by Azure OpenAI.
      Provide clear, accurate, and helpful responses across various domains including general conversation,
      problem solving, task assistance, and research support.
      
      You have access to multiple tool sources:
      
      LOCAL TOOLS (fastest):
      - GetWeather: Get weather for any location (native C# tool)
      
      MCP TOOLS (via MCP protocol):
      - get_weather: Get weather via MCP (same data as local tool)
      - get_products: Query product inventory
      - get_product: Get product details by ID
      - create_order: Create a new order
      - get_order: Check order status
      - get_customer_orders: Get customer order history
      - get_all_employees: List all employees
      - search_employees: Search employees by name/department
      
      Use the appropriate tools when users ask about weather, products, orders, 
      employees, or inventory management. Local tools are fastest, MCP tools 
      provide access to external systems.
    metadata:
      description: "General-purpose conversational agent powered by Azure OpenAI with Local and MCP tool access"
      mcp_enabled: true
      local_tools_enabled: true

  ms_foundry_people_agent:
    enabled: true
    instructions: |
      You are a People Lookup Agent expert at finding information about people, contacts, and team members.
      Base answers on verified directory information. When you cannot confirm details, clearly state that 
      no record was found and suggest contacting HR/IT. Never invent names, titles, roles, or contact details.
    metadata:
      description: "Specialized agent for finding people information using Microsoft Foundry"

  bedrock_agent:
    enabled: true
    instructions: |
      You are an HR and workplace policy assistant running on AWS Bedrock.
      Help employees with company policies, benefits, time off, and general HR guidance.
      If unsure of details, recommend checking official policy documents or contacting HR.
    metadata:
      description: "HR and workplace policy assistant powered by AWS Bedrock"

  openai_agent:
    enabled: true
    instructions: |
      You are a helpful assistant running on OpenAI's GPT-4.1 model.
      Specialize in software development, architecture, debugging, and technical explanation.
      Provide clear, concise answers with minimal, focused code examples.
    metadata:
      description: "Direct OpenAI assistant for development and technical help"